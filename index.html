<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>MOMS SHOP ‚Äî Choose Language</title>
  <link rel="stylesheet" href="./css/style.css" />
</head>
<body>
  <div class="langpage">
    <div class="langcard">
      <div style="display:flex;align-items:center;gap:12px">
        <div class="logo" aria-hidden="true"></div>
        <div class="brand-title">
          <b>MOMS SHOP</b>
          <span>Menu ‚Ä¢ Delivery ‚Ä¢ HISO</span>
        </div>
      </div>

      <h1 id="title">Choose your language</h1>
      <p id="subtitle">Tap a flag to continue.</p>

      <div class="langgrid" id="langGrid"></div>

      <div class="lang-actions">
        <button class="pillbtn" id="howBtn">‚ùì How to order</button>
        <button class="pillbtn" id="contactBtn">üí¨ Contact on Telegram</button>
        <button class="pillbtn" id="openNowBtn">üïò Open 09:00‚Äì23:00</button>
      </div>

      <p class="smallnote" style="margin-top:12px">
        Tip: Checkout will send the order to Telegram in Khmer so staff can process quickly.
      </p>
    </div>
  </div>

  <div id="modalBackdrop" class="modal-backdrop"></div>
  <div id="modal" class="modal" role="dialog" aria-modal="true" aria-label="Info modal">
    <div class="mhdr">
      <h3 id="modalTitle">Info</h3>
      <button class="mclose" id="modalClose">‚úï</button>
    </div>
    <div class="mcontent" id="modalContent"></div>
  </div>

  <script>
    const TELEGRAM_USERNAME = "Samplerasdip";

    const langs = [
      { code:'km', label:'·ûó·û∂·ûü·û∂·ûÅ·üí·ûò·üÇ·ûö', sub:'Khmer', flag:'./assets/flags/km.svg' },
      { code:'en', label:'English', sub:'English', flag:'./assets/flags/en.svg' },
      { code:'zh', label:'‰∏≠Êñá', sub:'Chinese', flag:'./assets/flags/zh.svg' },
      { code:'th', label:'‡πÑ‡∏ó‡∏¢', sub:'Thai', flag:'./assets/flags/th.svg' },
      { code:'vi', label:'Ti·∫øng Vi·ªát', sub:'Vietnamese', flag:'./assets/flags/vi.svg' },
      { code:'id', label:'Indonesia', sub:'Indonesian', flag:'./assets/flags/id.svg' },
    ];

    const grid = document.getElementById('langGrid');
    langs.forEach(l => {
      const btn = document.createElement('button');
      btn.className = 'langbtn';
      btn.innerHTML = `
        <img class="flagimg" src="${l.flag}" alt="${l.sub} flag" />
        <div class="meta">
          <b>${l.label}</b>
          <small>${l.sub}</small>
        </div>
        <span style="opacity:.7">‚Üí</span>
      `;
      btn.onclick = () => {
        localStorage.setItem('moms_lang', l.code);
        location.href = './app.html';
      };
      grid.appendChild(btn);
    });

    // Modal helpers
    const backdrop = document.getElementById('modalBackdrop');
    const modal = document.getElementById('modal');
    const mTitle = document.getElementById('modalTitle');
    const mContent = document.getElementById('modalContent');
    const closeBtn = document.getElementById('modalClose');

    function openModal(title, html){
      mTitle.textContent = title;
      mContent.innerHTML = html;
      backdrop.classList.add('show');
      modal.classList.add('show');
    }
    function closeModal(){
      backdrop.classList.remove('show');
      modal.classList.remove('show');
    }
    backdrop.onclick = closeModal;
    closeBtn.onclick = closeModal;
    document.addEventListener('keydown', (e)=>{ if(e.key==='Escape') closeModal(); });

    // Interactive buttons
    document.getElementById('howBtn').onclick = () => {
      openModal('How to order', `
        <div class="muted">Quick steps for delivery to HISO</div>
        <ol class="steps">
          <li>Select language</li>
          <li>Choose drinks and tap <b>+</b></li>
          <li>Open cart (üõí) and fill <b>Floor / Room / Phone</b></li>
          <li>Tap <b>Checkout</b> ‚Üí Telegram opens</li>
          <li>Send the message</li>
        </ol>
        <div class="muted" style="margin-top:10px">
          Note: The order message is sent in Khmer for staff.
        </div>
      `);
    };

    document.getElementById('contactBtn').onclick = () => {
      const url = `https://t.me/${TELEGRAM_USERNAME}`;
      openModal('Contact on Telegram', `
        <div>Chat directly with MOMS SHOP:</div>
        <div style="margin:10px 0">
          <a class="pillbtn" href="${url}" target="_blank" rel="noopener">Open Telegram Chat</a>
        </div>
        <div class="muted">${url}</div>
      `);
    };

    document.getElementById('openNowBtn').onclick = () => {
      openModal('Open hours', `
        <div><b>Open:</b> 09:00 ‚Äì 23:00</div>
        <div class="muted" style="margin-top:8px">Delivery available for HISO staff and nearby customers.</div>
      `);
    };
  </script>
</body>
</html>
